(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function l(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=l(i);fetch(i.href,n)}})();function P({canvas:e,gridcellDim:t}){const l=H(0,t,e.width),o=e.getContext("2d");o.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height);function i(c,d,r=t,s=t){o.beginPath(),o.rect(c,d,r,s),o.strokeStyle="black",o.lineWidth=1,o.stroke()}const n=Math.ceil(o.canvas.clientHeight/t);return[...new Array(n)].map((c,d)=>1+d).forEach(c=>{l.forEach((d,r)=>{c===1&&i(t*r,0),i(t*r,t*c)})}),!0}function H(e,t,l,o=!0,i=[]){const n=[];e:for(e;e<l+o;e+=t){for(let c of i)if(c==e)continue e;n.push(e)}return n}function W({canvas:e,gridcellDim:t,scalingFactorX:l=2,scalingFactorY:o=2,hitDetectionEnabled:i=!0}){const n=e.parentElement,c=(Number(n.getAttribute("readonly:width"))/Number(e.width))**-1,d=(Number(n.getAttribute("readonly:height"))/Number(e.height))**-1,r=Math.min(c,d),s=t*l*r**-1,u=t*o*r**-1,a="green",x=Math.ceil(n.clientWidth/t),R=Math.ceil(n.clientHeight/t),p=(x*t-s*r)/2,g=(R*t-u*r)/2,h=e.getContext("2d");h.clearRect(0,0,e.width,e.height),h.fillStyle=a,h.scale(devicePixelRatio,devicePixelRatio);let[f,y]=[0,0];window.screen.orientation.type.includes("portrait")?([f,y]=[(n.clientWidth-s*r)/2,(n.clientHeight-u*r)/2],h.fillRect(f,y,s*r,u*r)):h.fillRect(p,g,s*r,u*r),i&&(window.screen.orientation.type.includes("portrait")?b({canvas:e,viewConfig:{x:f,y,absoluteHeight:u,absoluteWidth:s,size:r,fill:a}}):b({canvas:e,viewConfig:{x:p,y:g,absoluteHeight:u,absoluteWidth:s,size:r,fill:a}}))}function b({canvas:e,viewConfig:t}){e.addEventListener("mousemove",l=>{const o={x:e.width/e.getBoundingClientRect().width,y:e.height/e.getBoundingClientRect().height},i=new Path2D;i.rect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size);const n=(l.clientX-e.getBoundingClientRect().left)*o.x,c=(l.clientY-e.getBoundingClientRect().top)*o.y,d=e.getContext("2d");d.clearRect(0,0,e.width,e.height),d.isPointInPath(i,n,c)?d.fillStyle="red":d.fillStyle=t.fill,d.fillRect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size)})}Object.defineProperties(Document.prototype,{findOne:{value:document.getElementById.bind(document)},findAll:{value:document.getElementsByClassName.bind(document)}});const m="layers";Object.defineProperty(HTMLElement.prototype,m,{get(){return this.children}});function E(e,t=20){const l={stageWidth:(e==null?void 0:e.clientWidth)*window.devicePixelRatio,stageHeight:(e==null?void 0:e.clientHeight)*window.devicePixelRatio};return e[m].length>0&&Array.from(e[m]).forEach(o=>{o.width=l.stageWidth,o.height=l.stageHeight}),{gridcellDim:Math.floor(e.clientWidth,e.clientHeight)/t}}function w(e){window.requestAnimationFrame(()=>{let{gridcellDim:t}=E(e,20);P({canvas:stage.layers.grid,gridcellDim:t})&&W({canvas:stage.layers.rect,gridcellDim:t})})}const M="placard.js";document.addEventListener("DOMContentLoaded",()=>{document.title=M;const e=document.findOne("stage");e.setAttribute("readonly:width",Math.floor(e.clientWidth*window.devicePixelRatio)),e.setAttribute("readonly:height",Math.floor(e.clientHeight*window.devicePixelRatio)),w(e),window.addEventListener("resize",w.bind(null,e))});
