(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();Object.defineProperties(Document.prototype,{findOne:{value:document.getElementById.bind(document)},findAll:{value:document.getElementsByClassName.bind(document)}});Object.defineProperty(HTMLElement.prototype,"views",{get(){return this.children}});const p={gridcellDim:64};function W({canvas:t,gridcellDim:e,gridcellMatrix:s}){const n=t.getContext("2d");n.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height);function i(c,o,a=e,g=e){n.beginPath(),n.rect(c,o,a,g),n.strokeStyle="black",n.lineWidth=1,n.stroke()}const r=Math.floor(Number(n.canvas.height/e));return[...new Array(r)].map((c,o)=>1+o).forEach(c=>{s.forEach((o,a)=>{c===1&&i(e*a,0),i(e*a,e*c)})}),!0}function O(t,e,s,n=!0,i=[]){const r=[];e:for(t;t<s+n;t+=e){for(let c of i)if(c==t)continue e;r.push(t)}return r}function v({canvas:t,gridcellDim:e,scalingFactorX:s=2,scalingFactorY:n=2,gridEnabled:i=!0,hitDetectionEnabled:r=!0}){const c={isMobile:window.screen.orientation.type.includes("portrait")&&i!==!1},o=t.parentElement,a=(Number(o.getAttribute("readonly:width"))/Number(t.width))**-1,g=(Number(o.getAttribute("readonly:height"))/Number(t.height))**-1,d=Math.min(a,g),H=Math.ceil(o.clientWidth/e),M=Math.ceil(o.clientHeight/e),h=e*s,u=e*n,m="green",b=i?(H*e-h*d)/2:(o.clientWidth-h*d)/2,x=i?(M*e-u*d)/2:(o.clientHeight-u*d)/2,f=t.getContext("2d");if(f.clearRect(0,0,t.width,t.height),f.fillStyle=m,f.scale(devicePixelRatio,devicePixelRatio),c.isMobile){let[w,y]=[(o.clientWidth-h*d)/2,(o.clientHeight-u*d)/2];f.fillRect(w,y,h*d,u*d)}else f.fillRect(b,x,h*d,u*d);if(r)if(c.isMobile){let[w,y]=[(o.clientWidth-h*d)/2,(o.clientHeight-u*d)/2];R({canvas:t,viewConfig:{x:w,y,absoluteHeight:u,absoluteWidth:h,size:d,fill:m}})}else R({canvas:t,viewConfig:{x:b,y:x,absoluteHeight:u,absoluteWidth:h,size:d,fill:m}})}function R({canvas:t,viewConfig:e}){t.addEventListener("mousemove",s=>{const n={x:t.width/t.getBoundingClientRect().width,y:t.height/t.getBoundingClientRect().height},i=new Path2D;i.rect(e.x,e.y,e.absoluteWidth*e.size,e.absoluteHeight*e.size);const r=(s.clientX-t.getBoundingClientRect().left)*n.x,c=(s.clientY-t.getBoundingClientRect().top)*n.y,o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.isPointInPath(i,r,c)?o.fillStyle="red":o.fillStyle=e.fill,o.fillRect(e.x,e.y,e.absoluteWidth*e.size,e.absoluteHeight*e.size)})}const L="placard.js";document.addEventListener("DOMContentLoaded",()=>{document.title=L});const l=document.findOne("stage");l.setAttribute("readonly:width",Math.floor(l.clientWidth*window.devicePixelRatio));l.setAttribute("readonly:height",Math.floor(l.clientHeight*window.devicePixelRatio));function P(){l.views.grid.width=l.clientWidth*window.devicePixelRatio,l.views.grid.height=l.clientHeight*window.devicePixelRatio,l.views.rect.width=l.clientWidth*window.devicePixelRatio,l.views.rect.height=l.clientHeight*window.devicePixelRatio,window.requestAnimationFrame(()=>{W({canvas:l.views.grid,gridcellMatrix:O(0,p.gridcellDim,l.views.grid.width),gridcellDim:p.gridcellDim})&&v({canvas:l.views.rect,gridcellDim:p.gridcellDim})})}P();window.addEventListener("resize",P);
