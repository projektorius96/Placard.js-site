var N=t=>{throw TypeError(t)};var x=(t,e,r)=>e.has(t)||N("Cannot "+r);var I=(t,e,r)=>(x(t,e,"read from private field"),r?r.call(t):e.get(t)),S=(t,e,r)=>e.has(t)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();class T{static draw({canvas:e,options:r}){e.style.cssText=`
            opacity: ${r.opacity||1};
        `;let o=stage.grid.GRIDCELL_DIM;const n=C(0,o,e.width),i=e.getContext("2d");i.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),i.clearRect(0,0,i.canvas.width,i.canvas.height);function d(s,a,h=o,f=o){i.beginPath(),i.rect(s,a,h,f),i.strokeStyle="black",i.lineWidth=2,i.stroke()}const u=Math.ceil(i.canvas.clientHeight/o);return[...new Array(u)].map((s,a)=>1+a).forEach(s=>{n.forEach((a,h)=>{s===1&&d(o*h,0),d(o*h,o*s)})}),!0}}function C(t,e,r,o=!0,n=[]){const i=[];e:for(t;t<r+o;t+=e){for(let d of n)if(d==t)continue e;i.push(t)}return i}class W{static draw({canvas:e,options:r={scalingFactorX:1,scalingFactorY:1},on:o=!1}){const n=e.parentElement;let i=n.grid.GRIDCELL_DIM,d=(Number(n.getAttribute("readonly:width"))/Number(e.width))**-1,u=(Number(n.getAttribute("readonly:height"))/Number(e.height))**-1,s=Math.min(d,u),a=i*r.scalingFactorX*s**-1,h=i*r.scalingFactorY*s**-1,f=Math.ceil(n.clientWidth/i),g=Math.ceil(n.clientHeight/i),m=a*s,w=h*s,M=(f*i-m)/2,P=(g*i-w)/2;const l=new Path2D;l.type="rect",l.fillStyle=r.fillStyle,l.x=M,l.y=P,l.show=!0,l.rect(0,0,a*s,h*s);const c=e.getContext("2d");return c.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),c.fillStyle=l.fillStyle,c.save(),typeof o=="function"?o({path:l})&&c.fill(l):c.fill(l),c.restore(),l}}var R,L;class y{static draw({canvas:e,options:r,on:o=Function}){const n=e.parentElement;let i=n.grid.GRIDCELL_DIM,d=(Number(n.getAttribute("readonly:width"))/Number(e.width))**-1,u=(Number(n.getAttribute("readonly:height"))/Number(e.height))**-1,s=Math.min(d,u),a=i*(r.scalingFactorXY||1)*s**-1,h=i*(r.scalingFactorXY||1)*s**-1,f=Math.ceil(n.clientWidth/i),g=Math.ceil(n.clientHeight/i),m=a*s,w=h*s,M=f*i/2,P=g*i/2;const l=new Path2D;l.type="line",l.strokeStyle=r.strokeStyle,l.lineWidth=r.lineWidth,l.x=M,l.y=P,l.show=!0;const c=e.getContext("2d");return c.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),c.beginPath(),c.strokeStyle=l.strokeStyle,c.lineWidth=l.lineWidth,r.offset?(l.moveTo(0+r.offset.POS_X||0,0+r.offset.POS_Y||0),l.lineTo((0+r.offset.POS_X||0)+m*r.offset.COS_ANGLE,(0+r.offset.POS_Y||0)+w*r.offset.SIN_ANGLE)):(l.moveTo(0,0),l.lineTo(0+m*I(this,R),0+w*I(this,L))),c.save(),typeof o=="function"?o({path:l})&&c.stroke(l):c.stroke(l),c.restore(),l}}R=new WeakMap,L=new WeakMap,S(y,R,Math.cos(0)),S(y,L,Math.sin(0));function p(t,e=0,r=0){const o=window.devicePixelRatio,n=Math.cos(t),i=Math.sin(t);let d=n,u=i,s=-i;return[d,u,s,n,e,r].map(g=>g=g*o)}function A(t){return t*(Math.PI/180)}const k=20,D="pointermove",G=1/Math.sin(Math.PI/4),E={CURRENT_ANGLE:-45};function F({canvas:t,context:e,cursor:r}){switch(t.id){case"grid":e.stack=[T.draw({canvas:t,options:{opacity:.25}})];break;case"right-triangle":e.stack=[W.draw({canvas:t,options:{scalingFactorX:.25,scalingFactorY:.25,fillStyle:"black"},on:function({path:o}){return b("rotation-about-origin",{context:e,path:o,GUI_STUB:E}),!o.show}}),y.draw({canvas:t,options:{strokeStyle:"red",lineWidth:4,scalingFactorXY:3,offset:{COS_ANGLE:Math.cos(0),SIN_ANGLE:Math.sin(0)}},on:function({path:o}){return b("rotation-about-origin",{context:e,path:o,GUI_STUB:E}),o.show}}),y.draw({canvas:t,options:{strokeStyle:"green",lineWidth:4,scalingFactorXY:3,offset:{POS_X:stage.grid.GRIDCELL_DIM*3,POS_Y:0,COS_ANGLE:Math.cos(Math.PI/2),SIN_ANGLE:-Math.sin(Math.PI/2)}},on:function({path:o}){return b("rotation-about-origin",{context:e,path:o,GUI_STUB:E}),o.show}}),y.draw({canvas:t,options:{strokeStyle:"blue",lineWidth:4,scalingFactorXY:3,offset:{COS_ANGLE:Math.cos(Math.PI/4)*G,SIN_ANGLE:-Math.sin(Math.PI/4)*G}},on:function({path:o}){return b("rotation-about-origin",{context:e,path:o,GUI_STUB:E}),e.isPointInStroke(o,r.x,r.y)?e.strokeStyle="coral":e.strokeStyle=o.strokeStyle,o.show}})];break}}function b(t,{context:e,path:r,GUI_STUB:o}){switch(t){case"rotation-about-origin":return Y({context:e,path:r,GUI_STUB:o})}}function Y({context:t,path:e,GUI_STUB:r}){switch(e.type){case"rect":t.setTransform(...p(A(0),e.x,e.y));break;case"line":t.setTransform(...p(A(r.CURRENT_ANGLE),e.x,e.y));break}return!0}const _="layers";Object.defineProperties(HTMLElement.prototype,{[_]:{get(){return this.children}}});function v({stage:t,options:e}){t.grid={GRIDCELL_DIM:t.clientWidth/X(e.GRIDCELL_DIM_RATIO)};const r={stageWidth:(t==null?void 0:t.clientWidth)*window.devicePixelRatio,stageHeight:(t==null?void 0:t.clientHeight)*window.devicePixelRatio};return t[_].length>0&&Array.from(t[_]).forEach(o=>{o.width=r.stageWidth,o.height=r.stageHeight}),!0}function H(t){if(!Array.isArray(t))return Array.from(t)}function X(t=0){const e=Math.ceil(t);return e%2===1?e+1:e}function O(t){return window.requestAnimationFrame(()=>{v({stage:t,options:{GRIDCELL_DIM_RATIO:k}})&&H(t.layers).forEach(e=>{e.addEventListener(D,r=>{const o=e.getContext("2d");o.clearRect(0,0,e.width,e.height);const n={x:e.width/e.getBoundingClientRect().width,y:e.height/e.getBoundingClientRect().height},i={x:(r.clientX-e.getBoundingClientRect().left)*n.x,y:(r.clientY-e.getBoundingClientRect().top)*n.y};F({canvas:e,context:o,cursor:i})}),e.dispatchEvent(new Event(D))})}),!0}const B="placard.js",U="0.0.2",j="module",z={vite:"^5.4.0"},V={name:B,version:U,type:j,devDependencies:z};document.addEventListener("DOMContentLoaded",()=>{document.title=V.name;const t=document.getElementById("stage");t?(t.setAttribute("readonly:width",Math.floor(t.clientWidth*window.devicePixelRatio)),t.setAttribute("readonly:height",Math.floor(t.clientHeight*window.devicePixelRatio)),O(t),window.addEventListener("resize",O.bind(null,t))):console.warn('Make sure you have declared %c"stage" in your %c"index.html" entry file',"font-style: italic;","font-style: italic;")});
