(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function d(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=d(i);fetch(i.href,r)}})();Object.defineProperties(Document.prototype,{findOne:{value:document.getElementById.bind(document)},findAll:{value:document.getElementsByClassName.bind(document)}});const b="layers";Object.defineProperty(HTMLElement.prototype,b,{get(){return this.children}});function W(e,t=20){const d={stageWidth:(e==null?void 0:e.clientWidth)*window.devicePixelRatio,stageHeight:(e==null?void 0:e.clientHeight)*window.devicePixelRatio};return e[b].length>0&&Array.from(e[b]).forEach(o=>{o.width=d.stageWidth,o.height=d.stageHeight}),{gridcellDim:Math.floor(e.clientWidth,e.clientHeight)/t}}function O({canvas:e,gridcellDim:t}){const d=L(0,t,e.width),o=e.getContext("2d");o.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height);function i(l,n,f=t,m=t){o.beginPath(),o.rect(l,n,f,m),o.strokeStyle="black",o.lineWidth=1,o.stroke()}const r=Math.ceil(o.canvas.clientHeight/t);return[...new Array(r)].map((l,n)=>1+n).forEach(l=>{d.forEach((n,f)=>{l===1&&i(t*f,0),i(t*f,t*l)})}),!0}function L(e,t,d,o=!0,i=[]){const r=[];e:for(e;e<d+o;e+=t){for(let l of i)if(l==e)continue e;r.push(e)}return r}function A({canvas:e,gridcellDim:t,scalingFactorX:d=2,scalingFactorY:o=2,gridEnabled:i=!0,hitDetectionEnabled:r=!0}){const l={isMobile:window.screen.orientation.type.includes("portrait")&&i!==!1},n=e.parentElement,f=(Number(n.getAttribute("readonly:width"))/Number(e.width))**-1,m=(Number(n.getAttribute("readonly:height"))/Number(e.height))**-1,c=Math.min(f,m),H=Math.ceil(n.clientWidth/t),M=Math.ceil(n.clientHeight/t),s=t*d,h=t*o,y="green",x=i?(H*t-s*c)/2:(n.clientWidth-s*c)/2,R=i?(M*t-h*c)/2:(n.clientHeight-h*c)/2,a=e.getContext("2d");if(a.clearRect(0,0,e.width,e.height),a.fillStyle=y,a.scale(devicePixelRatio,devicePixelRatio),l.isMobile){let[g,p]=[(n.clientWidth-s*c)/2,(n.clientHeight-h*c)/2];a.fillRect(g,p,s*c,h*c)}else a.fillRect(x,R,s*c,h*c);if(r)if(l.isMobile){let[g,p]=[(n.clientWidth-s*c)/2,(n.clientHeight-h*c)/2];w({canvas:e,viewConfig:{x:g,y:p,absoluteHeight:h,absoluteWidth:s,size:c,fill:y}})}else w({canvas:e,viewConfig:{x,y:R,absoluteHeight:h,absoluteWidth:s,size:c,fill:y}})}function w({canvas:e,viewConfig:t}){e.addEventListener("mousemove",d=>{const o={x:e.width/e.getBoundingClientRect().width,y:e.height/e.getBoundingClientRect().height},i=new Path2D;i.rect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size);const r=(d.clientX-e.getBoundingClientRect().left)*o.x,l=(d.clientY-e.getBoundingClientRect().top)*o.y,n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.isPointInPath(i,r,l)?n.fillStyle="red":n.fillStyle=t.fill,n.fillRect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size)})}const E="placard.js";let u=null;document.addEventListener("DOMContentLoaded",()=>{document.title=E,u=document.findOne("stage"),u.setAttribute("readonly:width",Math.floor(u.clientWidth*window.devicePixelRatio)),u.setAttribute("readonly:height",Math.floor(u.clientHeight*window.devicePixelRatio))});function P(){window.requestAnimationFrame(()=>{let e=W(u);O({canvas:u.layers.grid,gridcellDim:e.gridcellDim})&&A({canvas:u.layers.rect,gridcellDim:e.gridcellDim})})}P();window.addEventListener("resize",P);
