(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();Object.defineProperties(Document.prototype,{findOne:{value:document.getElementById.bind(document)},findAll:{value:document.getElementsByClassName.bind(document)}});Object.defineProperty(HTMLElement.prototype,"views",{get(){return this.children}});const p={gridcellDim:64};function H({canvas:e,gridcellDim:t,gridcellMatrix:s}){const n=e.getContext("2d");n.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height);function i(r,c,a=t,l=t){n.beginPath(),n.rect(r,c,a,l),n.strokeStyle="black",n.lineWidth=1,n.stroke()}const o=Math.floor(Number(n.canvas.height/t));return[...new Array(o)].map((r,c)=>1+c).forEach(r=>{s.forEach((c,a)=>{r===1&&i(t*a,0),i(t*a,t*r)})}),!0}function M(e,t,s,n=!0,i=[]){const o=[];e:for(e;e<s+n;e+=t){for(let r of i)if(r==e)continue e;o.push(e)}return o}function W({canvas:e,gridcellDim:t,scalingFactorX:s=2,scalingFactorY:n=2,gridEnabled:i=!0,hitDetectionEnabled:o=!0}){const r={isMobile:window.screen.orientation.type.includes("portrait")&&i!==!1},c=(Number(e.parentElement.getAttribute("readonly:width"))/Number(e.width))**-1,a=(Number(e.parentElement.getAttribute("readonly:height"))/Number(e.height))**-1,l=Math.min(c,a),P=Math.ceil(e.parentElement.clientWidth/t),E=Math.ceil(e.parentElement.clientHeight/t),h=t*s,u=t*n,g="green",y=i?(P*t-h*l)/2:(e.parentElement.clientWidth-h*l)/2,b=i?(E*t-u*l)/2:(e.parentElement.clientHeight-u*l)/2,f=e.getContext("2d");if(f.clearRect(0,0,e.width,e.height),f.fillStyle=g,f.scale(devicePixelRatio,devicePixelRatio),r.isMobile){let[m,w]=[(window.innerWidth-h*l)/2,(window.innerHeight-u*l)/2];f.fillRect(m,w,h*l,u*l)}else f.fillRect(y,b,h*l,u*l);if(o)if(r.isMobile){let[m,w]=[(window.innerWidth-h*l)/2,(window.innerHeight-u*l)/2];x({canvas:e,viewConfig:{x:m,y:w,absoluteHeight:u,absoluteWidth:h,size:l,fill:g}})}else x({canvas:e,viewConfig:{x:y,y:b,absoluteHeight:u,absoluteWidth:h,size:l,fill:g}})}function x({canvas:e,viewConfig:t}){e.addEventListener("mousemove",s=>{const n={x:e.width/e.getBoundingClientRect().width,y:e.height/e.getBoundingClientRect().height},i=new Path2D;i.rect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size);const o=(s.clientX-e.getBoundingClientRect().left)*n.x,r=(s.clientY-e.getBoundingClientRect().top)*n.y,c=e.getContext("2d");c.clearRect(0,0,e.width,e.height),c.isPointInPath(i,o,r)?c.fillStyle="red":c.fillStyle=t.fill,c.fillRect(t.x,t.y,t.absoluteWidth*t.size,t.absoluteHeight*t.size)})}const O="placard.js";document.addEventListener("DOMContentLoaded",()=>{document.title=O});const d=globalThis.stage=document.findOne("stage");d.setAttribute("readonly:width",Math.floor(d.clientWidth*window.devicePixelRatio));d.setAttribute("readonly:height",Math.floor(d.clientHeight*window.devicePixelRatio));function R(){d.views.grid.width=d.clientWidth*window.devicePixelRatio,d.views.grid.height=d.clientHeight*window.devicePixelRatio,d.views.rect.width=d.clientWidth*window.devicePixelRatio,d.views.rect.height=d.clientHeight*window.devicePixelRatio,window.requestAnimationFrame(()=>{H({canvas:d.views.grid,gridcellMatrix:M(0,p.gridcellDim,d.views.grid.width),gridcellDim:p.gridcellDim})&&W({canvas:d.views.rect,gridcellDim:p.gridcellDim})})}R();window.addEventListener("resize",R.bind(null,!1));
