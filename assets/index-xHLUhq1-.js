(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class I{static draw({canvas:i,options:n}){i.style.cssText=`
            opacity: ${n.opacity||1};
        `;let o=stage.grid.GRIDCELL_DIM;const t=M(0,o,i.width),r=i.getContext("2d");r.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),r.clearRect(0,0,r.canvas.width,r.canvas.height);function l(a,s,h=o,u=o){r.beginPath(),r.rect(a,s,h,u),r.strokeStyle="black",r.lineWidth=2,r.stroke()}const d=Math.ceil(r.canvas.clientHeight/o);return[...new Array(d)].map((a,s)=>1+s).forEach(a=>{t.forEach((s,h)=>{a===1&&l(o*h,0),l(o*h,o*a)})}),!0}}function M(e,i,n,o=!0,t=[]){const r=[];e:for(e;e<n+o;e+=i){for(let l of t)if(l==e)continue e;r.push(e)}return r}class w{static draw({canvas:i,options:n,scalingFactorX:o=1,scalingFactorY:t=1}){const r=i.parentElement;let l=r.grid.GRIDCELL_DIM,d=(Number(r.getAttribute("readonly:width"))/Number(i.width))**-1,a=(Number(r.getAttribute("readonly:height"))/Number(i.height))**-1,s=Math.min(d,a),h=l*o*s**-1,u=l*t*s**-1;const S=Math.ceil(r.clientWidth/l),L=Math.ceil(r.clientHeight/l),g=(S*l-h*s)/2,y=(L*l-u*s)/2,c=new Path2D;c.type=w.name;const m=i.getContext("2d");return m.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),m.fillStyle=n.fillStyle,c.fillStyle=m.fillStyle,c.rect(g,y,h*s,u*s),c}}class f{static draw({canvas:i,options:n}){const o=i.parentElement;let t=o.grid.GRIDCELL_DIM,r=(Number(o.getAttribute("readonly:width"))/Number(i.width))**-1,l=(Number(o.getAttribute("readonly:height"))/Number(i.height))**-1,d=Math.min(r,l),a=t*(n.scalingFactorXY||1)*d**-1,s=t*(n.scalingFactorXY||1)*d**-1,h=Math.ceil(o.clientWidth/t),u=Math.ceil(o.clientHeight/t),S=a*d,L=s*d,g=h*t/2,y=u*t/2;const c=new Path2D;c.type=f.name,c.strokeStyle=n.strokeStyle,c.lineWidth=n.lineWidth;const m=i.getContext("2d");return m.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0),m.beginPath(),n.offset?(c.moveTo(g+n.offset.POS_X,y+n.offset.POS_Y),c.lineTo(g+n.offset.POS_X+S*n.offset.COS_ANGLE,y+n.offset.POS_Y+L*n.offset.SIN_ANGLE)):(c.moveTo(g,y),c.lineTo(g+S*DEFAULT_COS_ANGLE,y+L*DEFAULT_SIN_ANGLE)),c}}function A({canvas:e}){const i=e.getContext("2d"),n=new Path2D;n.type="hitdetection",n.name=n.type;const o=new Path2D;switch(o.stack=[],e.id){case"grid":I.draw({canvas:stage.layers[e.id],options:{opacity:.25}});break;case"right-triangle":o.stack=[n,w.draw({scalingFactorX:.25,scalingFactorY:.25,canvas:stage.layers[e.id],options:{fillStyle:"black"}}),f.draw({canvas:stage.layers[e.id],options:{scalingFactorXY:3,strokeStyle:"red",lineWidth:6,offset:{POS_X:0,POS_Y:0,COS_ANGLE:p,SIN_ANGLE:D}}}),f.draw({canvas:stage.layers[e.id],options:{scalingFactorXY:3,strokeStyle:"green",lineWidth:6,offset:{POS_X:stage.grid.GRIDCELL_DIM*3,POS_Y:0,COS_ANGLE:Math.cos(Math.PI/2),SIN_ANGLE:-Math.sin(Math.PI/2)}}}),f.draw({canvas:stage.layers[e.id],options:{scalingFactorXY:3,strokeStyle:"blue",lineWidth:6,offset:{POS_X:0,POS_Y:0,COS_ANGLE:Math.cos(Math.PI/4)*E,SIN_ANGLE:-Math.sin(Math.PI/4)*E}}})];break}o.stack.forEach((t,r,l)=>{switch(t.type){case n.name:P({canvas:e,path:t,HitDetection:n});break;case w.name:i.fill(t),P({canvas:e,path:t,HitDetection:n});break;case f.name:i.strokeStyle=t.strokeStyle,i.lineWidth=t.lineWidth,i.stroke(t),P({canvas:e,path:t,HitDetection:n});break}t.index=++r,l.length,t.index})}const N=20,p=Math.cos(0),D=Math.sin(0),E=1/Math.sin(Math.PI/4);function P({canvas:e,path:i,HitDetection:n}){e.addEventListener("pointerdown",o=>{const t=e.getContext("2d"),r={x:e.width/e.getBoundingClientRect().width,y:e.height/e.getBoundingClientRect().height},l=(o.clientX-e.getBoundingClientRect().left)*r.x,d=(o.clientY-e.getBoundingClientRect().top)*r.y;switch(i.type){case n.name:t.clearRect(0,0,e.width,e.height);break;case w.name:t.isPointInPath(i,l,d)?t.fillStyle="magenta":t.fillStyle=i.fillStyle,t.fill(i);break;case f.name:t.isPointInStroke(i,l,d)?t.strokeStyle="magenta":t.strokeStyle=i.strokeStyle,t.stroke(i);break}})}const b="layers";Object.defineProperty(HTMLElement.prototype,b,{get(){return this.children}});function x({stage:e,options:i}){e.grid={GRIDCELL_DIM:e.clientWidth/O(i.GRIDCELL_DIM_RATIO)};const n={stageWidth:(e==null?void 0:e.clientWidth)*window.devicePixelRatio,stageHeight:(e==null?void 0:e.clientHeight)*window.devicePixelRatio};return e[b].length>0&&Array.from(e[b]).forEach(o=>{o.width=n.stageWidth,o.height=n.stageHeight}),!0}function R(e){if(!Array.isArray(e))return Array.from(e)}function O(e=0){const i=Math.ceil(e);return i%2===1?i+1:i}function _(e){return window.requestAnimationFrame(()=>{x({stage:e,options:{GRIDCELL_DIM_RATIO:N}})&&R(e.layers).forEach(i=>A({canvas:i}))}),!0}const k="placard.js",C="0.0.2",G="module",W={vite:"^5.4.0"},T={name:k,version:C,type:G,devDependencies:W};document.addEventListener("DOMContentLoaded",()=>{document.title=T.name;const e=document.getElementById("stage");e?(e.setAttribute("readonly:width",Math.floor(e.clientWidth*window.devicePixelRatio)),e.setAttribute("readonly:height",Math.floor(e.clientHeight*window.devicePixelRatio)),_(e),window.addEventListener("resize",_.bind(null,e))):console.warn('Make sure you have declared %c"stage" in your %c"index.html" entry file',"font-style: italic;","font-style: italic;")});
